var glTFEmojiRenderer=glTFEmojiRenderer||{};!function(){"use strict";var R=glTFEmojiRenderer;R.Meme=function(_canvas,_url,_text,_sceneInfo,_textInfo){function initScene(sceneInfo){scene=new THREE.Scene,defaultCamera=new THREE.PerspectiveCamera(45,width/height,1,2e4),scene.add(defaultCamera),camera=defaultCamera;var spot1=null;if(sceneInfo.addLights){var ambient=new THREE.AmbientLight(2236962);scene.add(ambient);var directionalLight=new THREE.DirectionalLight(14540253);directionalLight.position.set(0,0,1).normalize(),scene.add(directionalLight),spot1=new THREE.SpotLight(16777215,1),spot1.position.set(10,20,10),spot1.angle=.25,spot1.distance=1024,spot1.penumbra=.75,sceneInfo.shadows&&(spot1.castShadow=!0,spot1.shadow.bias=1e-4,spot1.shadow.mapSize.width=2048,spot1.shadow.mapSize.height=2048),scene.add(spot1)}renderer=new THREE.WebGLRenderer({antialias:!0,canvas:canvas}),renderer.setClearColor(sceneInfo.clearColor||0),renderer.setPixelRatio(window.devicePixelRatio),renderer.setSize(width,height),orbitControls=new THREE.OrbitControls(defaultCamera,renderer.domElement),sceneInfo.shadows&&(renderer.shadowMap.enabled=!0,renderer.shadowMap.type=THREE.PCFSoftShadowMap);var ground=null;if(sceneInfo.addGround){var groundMaterial=new THREE.MeshPhongMaterial({color:16777215,shading:THREE.SmoothShading});ground=new THREE.Mesh(new THREE.PlaneBufferGeometry(512,512),groundMaterial),sceneInfo.shadows&&(ground.receiveShadow=!0),sceneInfo.groundPos?ground.position.copy(sceneInfo.groundPos):ground.position.z=-70,ground.rotation.x=-Math.PI/2,scene.add(ground)}loader=new THREE.glTFLoader;var loadStartTime=Date.now();console.log("Loading...");var r=eval("/%s/g"),dir=useMaterialsExtension?"glTF-MaterialsCommon":"glTF";url=url.replace(r,dir);var loadStartTime=Date.now();console.log("Loading..."),loader.load(url,function(e){gltf=e;var n=gltf.scene,o=Date.now(),t=(o-loadStartTime)/1e3;if(console.log("Load time: "+t.toFixed(2)+"seconds"),sceneInfo.cameraPos&&defaultCamera.position.copy(sceneInfo.cameraPos),sceneInfo.center&&orbitControls.target.copy(sceneInfo.center),sceneInfo.objectPosition&&(n.position.copy(sceneInfo.objectPosition),spot1&&(spot1.position.set(sceneInfo.objectPosition.x-100,sceneInfo.objectPosition.y+200,sceneInfo.objectPosition.z-100),spot1.target.position.copy(sceneInfo.objectPosition))),sceneInfo.objectRotation&&n.rotation.copy(sceneInfo.objectRotation),sceneInfo.objectScale&&n.scale.copy(sceneInfo.objectScale),cameraIndex=0,cameras=[],cameraNames=[],gltf.cameras&&gltf.cameras.length){var a,r=gltf.cameras.length;for(a=0;a<r;a++){var i=!0,s=gltf.cameras[a].parent.name;!sceneInfo.cameras||s in sceneInfo.cameras||(i=!1),i&&(cameraNames.push(s),cameras.push(gltf.cameras[a]))}}if(gltf.animations&&gltf.animations.length){var a,r=gltf.animations.length;for(a=0;a<r;a++){var c=gltf.animations[a];c.loop=!0,sceneInfo.animationTime&&(c.duration=sceneInfo.animationTime),c.play()}}if(scene.add(n),text3D=R.createText3D(text,textInfo),text3D.position.set(0,0,0),textInfo.position&&text3D.position.copy(textInfo.position),textInfo.scale&&text3D.scale.copy(textInfo.scale),textInfo.animation)switch(textInfo.animation){case"spin":animateText3DHandler=animateText3DSpin;break;case"shake":originPosition=text3D.position,animateText3DHandler=animateText3DShake}scene.add(text3D),animate()})}function toggleAnimations(){var e,n=gltf.animations.length;for(e=0;e<n;e++){var o=gltf.animations[e];o.running?o.stop():o.play()}}function animate(){requestAnimationFrame(animate),THREE.glTFAnimator.update(),THREE.glTFShaders.update(scene,camera),0==cameraIndex&&orbitControls.update(),text3D&&animateText3DHandler&&animateText3DHandler(),render()}function animateText3DSpin(){frame+=1,text3D.rotation.y=.2*Math.sin(.05*frame),text3D.rotation.x=.005*Math.sin(.03*frame)}function animateText3DShake(){frame+=1,text3D.position.y=originPosition.y+.1*Math.sin(.5*frame)}function render(){renderer.render(scene,camera)}var canvas=_canvas,width=canvas.width,height=canvas.height,url=_url,orbitControls=null,container,camera,scene,renderer,loader,cameraIndex=0,cameras=[],cameraNames=[],defaultCamera=null,gltf=null,sceneInfo=_sceneInfo||{clearColor:16777215,cameraPos:new THREE.Vector3(0,3,10),objectRotation:new THREE.Euler(0,-3*Math.PI/4,0),addLights:!0,shadows:!0},textInfo=_textInfo||{position:new THREE.Vector3(0,0,1),scale:new THREE.Vector3(.01,.01,.01),color:13421772},text=_text||"DA FUQ?",text3D,animateText3DHandler=null,useMaterialsExtension=!1,frame=0,originPosition;this.createEmoji=function(){console.log("glTF emoji entry"),initScene(sceneInfo,textInfo)}}}();var glTFEmojiRenderer=glTFEmojiRenderer||{};!function(){"use strict";function e(e,n){var o=new THREE.FontLoader;o.load("/fonts/"+e+"_"+n+".typeface.json",function(e){l=e})}var n=glTFEmojiRenderer,o=20,t=70,a=30,r=4,i=2,s=1.5,c=!0,l=void 0;e("optimer","bold"),n.createText3D=function(e,n){n=n||{};var d=void 0!==n.color?n.color:16777215,m=new THREE.TextGeometry(e,{font:l,size:t,height:o,curveSegments:r,bevelThickness:i,bevelSize:s,bevelEnabled:c,material:0,extrudeMaterial:1});m.computeBoundingBox(),m.computeVertexNormals();var f=new THREE.MultiMaterial([new THREE.MeshPhongMaterial({color:d,shading:THREE.FlatShading}),new THREE.MeshPhongMaterial({color:d,shading:THREE.SmoothShading})]);if(!c)for(var g=.1*(o*t),h=0;h<m.faces.length;h++){var p=m.faces[h];if(1==p.materialIndex){for(var E=0;E<p.vertexNormals.length;E++)p.vertexNormals[E].z=0,p.vertexNormals[E].normalize();var u=m.vertices[p.a],x=m.vertices[p.b],T=m.vertices[p.c],v=THREE.GeometryUtils.triangleArea(u,x,T);if(v>g)for(var E=0;E<p.vertexNormals.length;E++)p.vertexNormals[E].copy(p.normal)}}var I=-.5*(m.boundingBox.max.x-m.boundingBox.min.x),w=new THREE.Mesh(m,f);w.position.x=I,w.position.y=a,w.position.z=0,w.rotation.x=0,w.rotation.y=2*Math.PI;var R=new THREE.Group;return R.add(w),R}}();